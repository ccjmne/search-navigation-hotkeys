!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;return function(){var r=(new Date).getTime();if(r-n>=t)return n=r,e.apply(void 0,arguments)}}},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r);function c(e){return new Promise(function(t){var n=setInterval(function(){return function(e){return e&&t(e)&&clearInterval(n)}(document.querySelector(e))},100)})}function i(e){return new Promise(function(t){var n=setInterval(function(){return function(e){return e.length>0&&t([].slice.call(e))&&clearInterval(n)}(document.querySelectorAll(e))},100)})}function a(e,t){return function(n){var r=n.indexOf("#"),o=-1===r?"":n.substr(r);n=-1===r?n:n.substr(0,r);var c=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==n.indexOf("?")?"&":"?";return(n=n.match(c)?n.replace(c,"$1"+e+"="+t+"$2"):n+i+e+"="+t)+o}(window.location.href)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){var t,n=e.type,r=void 0===n?"div":n,o=e.id,c=void 0===o?"":o,i=e.classes,a=void 0===i?[]:i,l=e.contents,f=void 0===l?"":l,d=document.createElement(r);return d.id=c,(t=d.classList).add.apply(t,s(a)),d.innerHTML=f,d.detach=function(e){e.parentNode&&e.parentNode.removeChild(e)}.bind(null,d),d.pickStylesFrom=function(e,t){return Object.assign(d.style,function(e){return t.reduce(function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){u(e,t,n[t])})}return e}({},t,u({},n,e[n]))},{})}(window.getComputedStyle(e)))},d}var f=l({id:"ccjmne-snh-tooltip"});Object.assign(f,{concealTimer:null,reveal:function(e){f.parentNode!==e.target&&(clearTimeout(f.concealTimer),e.target.appendChild(f),f.concealTimer=setTimeout(f.conceal,3e3),f.animate({transform:["translate(-50%, 0) scale(0)","translate(-100%, 1em) scale(1.1)","translate(-100%, 1em) scale(1)"],offset:[0,.8]},{duration:200,easing:"ease-out",fill:"both"}))},conceal:function(){return(f.animate({transform:["translate(-100%, 1em) scale(1)","translate(-100%, 1em) scale(1.1)","translate(-100%, 1em) scale(.5)"],opacity:[1,1,0],offset:[0,.3]},{duration:200,easing:"ease-in",fill:"backwards"}).onfinish=function(){return f.parentNode&&f.parentNode.removeChild(f)})&&clearTimeout(f.concealTimer)}}),f.addEventListener("click",f.conceal);var d=l({type:"span",id:"ccjmne-snh-indicator"}),p=l({id:"ccjmne-snh-help-card",contents:'\n    <div id="ccjmne-snh-help-card-title">\n        <span>Navigation Hotkeys for Google™ Search</span>\n        <small>by&nbsp;<a href="https://github.com/ccjmne">ccjmne</a></small>\n    </div>\n    <table></table>'}),h={"..":" to ","-":"+","|":" or ","[":" [","]":"] ","w/":"add "},m={Up:"↑",Down:"↓",Left:"←",Right:"→",Ctrl:"⌃",Shift:"⇧",Space:"⎵",Enter:"↲",Escape:"␛"},y=p.querySelector("table");function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}[[{desc:"Focus [previous] result",hotkey:"Up|k"},{desc:"Focus [next] result",hotkey:"Down|j"},{desc:"Navigate to [previous] page",hotkey:"Left|h"},{desc:"Navigate to [next] page",hotkey:"Right|l"}],[{desc:"Open [focused] result",hotkey:"Space|Enter"},{desc:"in [new tab]",hotkey:"w/Ctrl",indent:1},{desc:"and [follow]",hotkey:"w/Ctrl-Shift",indent:2},{desc:"Open result #[1] to #[9]",hotkey:"1..9"}],[{desc:"Focus [search] field",hotkey:"/"},{desc:"Enter [filter & sort] mode",hotkey:"Ctrl-/"}],[{desc:"Search [all]",hotkey:"a"},{desc:"Search [videos]",hotkey:"v"},{desc:"Search [images]",hotkey:"i"},{desc:"Search [news]",hotkey:"n"}],[{desc:"[Show] help",hotkey:"?"},{desc:"[Close] help",hotkey:"Escape"}]].forEach(function(e){return e.forEach(function(e,t){return y.appendChild(l({type:"tr",classes:0===t?["ccjmne-snh-new-section"]:[],contents:"\n    <td>".concat(e.indent?'<div class="ccjmne-snh-indent ccjmne-snh-indent-'.concat(e.indent,'"></div>'):"").concat(e.desc.replace(/\[([^\]]+)\]/g,function(e,t){return"<em>".concat(t,"</em>")}),"</td>\n    <td>").concat(e.hotkey.split(new RegExp(function(e){return"(?=".concat(e,")|(?<=").concat(e,")")}(Object.keys(h).map(function(e){return e.replace(/./g,function(e){return"\\"+e})}).join("|")))).map(function(e){return h[e]||"<kbd>".concat(e).concat(m[e]?'<span class="kbd-addon">'.concat(m[e],"</span>"):"","</kbd>")}).join(""),"</td>")}))})}),p.addEventListener("click",function(e){return e.stopPropagation()});var w=l({id:"ccjmne-snh-backdrop",contents:'\n    <div id="ccjmne-snh-tilt-origin">\n        <div id="ccjmne-snh-help-shadow"></div>\n        <div id="ccjmne-snh-help-card-container"></div>\n    </div>'}),b=w.querySelector("#ccjmne-snh-tilt-origin");function g(e){e&&!w.parentNode?(document.body.prepend(w),w.animate({opacity:[0,1]},{duration:200,easing:"ease-out"}),p.animate({transform:["translateY(-50%) rotateX(80deg)","translateY(2%) rotateX(0)","translateY(0)"],opacity:[0,1,1],offset:[0,.8]},{duration:300,delay:100,easing:"ease-out",fill:"backwards"})):!e&&w.parentNode&&(b.style.transform="",w.animate({opacity:[1,0]},{duration:200,easing:"ease-out"}).onfinish=w.detach,p.animate({transform:["scale(1)","scale(1.1)","scale(.5)"]},{duration:200,easing:"ease-out"}))}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw c}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}w.querySelector("#ccjmne-snh-help-card-container").appendChild(p),w.addEventListener("click",function(){return g(!1)}),b.addEventListener("mouseleave",function(){return b.style.transform=""}),b.addEventListener("mousemove",o()(function(e){var t=b.getBoundingClientRect(),n=t.left,r=t.top,o=t.right,c=t.bottom,i=e.clientX-(n+o)/2,a=e.clientY-(r+c)/2,u=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/Math.max(p.clientWidth,p.clientHeight);b.style.transform="rotate3d(".concat(Math.round(a),", ").concat(-Math.round(i),", 0, ").concat(10*u,"deg)")},100)),function(e){p.addEventListener("mousedown",function(){return e.down()}),p.addEventListener("mouseup",function(){return e.up()}),p.addEventListener("mouseleave",function(){return e.up()})}({isDown:!1,transform:["scale(1)","scale(.95)"],down:function(){this.isDown=this.isDown||p.animate({transform:this.transform},{duration:100,fill:"forwards",easing:"ease-out"})},up:function(){this.isDown=this.isDown&&(p.animate({transform:v(this.transform).reverse()},{duration:300,fill:"forwards",easing:"cubic-bezier(.25, 2.5, .25, .5)"}),!1)}}),d.addEventListener("mouseenter",f.reveal),f.addEventListener("click",function(){return g(!0)});var j={root:"#hdtbMenus",menus:".hdtb-mn-hd[role=button][aria-haspopup=true]",options:[".hdtb-mn-o .hdtbItm > a",".hdtb-mn-o :not(input)[tabindex]"]};function A(e){var t=document.querySelector("#hdtb-tls.hdtb-tl"),n=document.querySelector("".concat(j.root," ").concat(j.menus,".hdtb-tsel")),r=document.querySelector("".concat(j.root," .hdtb-mn-o"));t.matches(".hdtb-tl-sel")||t.click(),e&&!r?(n||document.querySelector("".concat(j.root," ").concat(j.menus))).click():!e&&r&&r.previousElementSibling.click()}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Promise.all([c(j.root),i("".concat(j.root," ").concat(j.menus))]).then(function(e){var t=k(e,2),n=t[0],r=t[1];n.addEventListener("keydown",function(e){if(~["?","/","Escape"].indexOf(e.key))return A(!1);if(~["Enter","Escape"," ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","h","j","k","l"].indexOf(e.key)){var t=n.querySelector(j.options.map(function(e){return"".concat(e,":focus")})),o=[].slice.apply(n.querySelectorAll(j.options)),c=function(e){return e?r.indexOf(e.previousElementSibling):0}(n.querySelector(".hdtb-mn-o")),i=o.indexOf(t),a={Enter:function(){return t.click()}," ":function(){return t.click()},ArrowLeft:function(){return r[c>0?c-1:r.length-1].click()},ArrowUp:function(){return o[i>0?i-1:o.length-1].focus()},ArrowRight:function(){return r[(c+1)%r.length].click()},ArrowDown:function(){return o[(i+1)%o.length].focus()},h:function(){return a.ArrowLeft()},j:function(){return a.ArrowDown()},k:function(){return a.ArrowUp()},l:function(){return a.ArrowRight()}};a[e.key](),e.stopPropagation(),e.preventDefault()}})}),n(1),c("input[title=Search]").then(function(e){var t=function(){return Promise.resolve().then(function(){e.focus(),e.setSelectionRange(e.value.length,e.value.length)})},n={restoreFocus:function(){return"noop"},Escape:function(){return g(!1),n.restoreFocus()},"?":function(){return g(!0)},a:function(){return window.location.href=a("tbm","")},i:function(){return window.location.href=a("tbm","isch")},m:function(){return null},n:function(){return window.location.href=a("tbm","nws")},v:function(){return window.location.href=a("tbm","vid")},"/":function(e){return e.ctrlKey?A(!0):t()}};e.addEventListener("blur",function(){return n.restoreFocus()}),document.body.onkeydown=function(e){e.srcElement.matches(["input","select","textarea"])||e.altKey||e.ctrlKey&&!~["/"," ","ArrowUp","ArrowDown","j","k"].indexOf(e.key)||~["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","h","j","k","l"].indexOf(e.key)&&!~[void 0,null,"","nws","vid"].indexOf(function(e){return(window.location.search.match(new RegExp("(?<=[&?]".concat(e,"=)[^&]*")))||[])[0]}("tbm"))||function(t){"function"==typeof t&&Promise.resolve(t(e)).then(function(){return e.preventDefault(),e.stopPropagation()})}(n[e.key])},i(["#search .r > a:first-of-type","#search .r g-link:first-of-type > a",".ads-ad h3 > a:not(:empty)",".ads-ad a > h3"]).then(function(e){return e.filter(function(e){return!e.closest(["g-scrolling-carousel","g-accordion-expander"])})}).then(function(e){return e.filter(function(e){return null!==e.offsetParent})}).then(function(e){var r=this;Object.assign(this,{prev:document.querySelector("a.pn#pnprev"),next:document.querySelector("a.pn#pnnext"),cur:e.length>0?0:-1,results:e.map(function(e){return{container:e.closest([".r","li.ads-ad",".ads-ad li"]),palette:e.querySelector("h3")||e.closest("h3"),link:e.closest("a")}}),go:function(e){return r.results[r.cur]&&r.results[r.cur].link.dispatchEvent(new MouseEvent("click",e))},focus:function(e){return-1===(r.cur=e)?t().then(d.detach):function(e){e.link.focus(),e.container.prepend(d),e.container.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),d.animate([{transform:"translateX(-50px)"},{transform:"translateX(0)"}],{duration:100,easing:"ease-out"})}(r.results[e])}}),this.results.forEach(function(e,t){var n=l({classes:["ccjmne-snh-number-indicator"],contents:t+1});n.pickStylesFrom(e.palette,["height","line-height"]),n.addEventListener("mouseenter",f.reveal),e.container.prepend(n)}),this.focus(this.cur),Object.assign.apply(Object,[n].concat(S(S(Array(9).keys()).map(function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e+1,function(t){return r.focus(e),r.go(t)})})))),Object.assign(n,{restoreFocus:function(){return r.focus(r.cur>0?r.cur:0)}," ":function(e){return r.go({ctrlKey:e.ctrlKey,shiftKey:e.shiftKey})},ArrowLeft:function(){return r.prev&&r.prev.dispatchEvent(new MouseEvent("click"))},ArrowUp:function(){return r.focus(r.cur>0?r.cur-1:r.results.length-1)},ArrowRight:function(){return r.next&&r.next.dispatchEvent(new MouseEvent("click"))},ArrowDown:function(){return r.focus(++r.cur%r.results.length)},h:function(){return n.ArrowLeft()},j:function(){return n.ArrowDown()},k:function(){return n.ArrowUp()},l:function(){return n.ArrowRight()}})}.bind({}))})}])});