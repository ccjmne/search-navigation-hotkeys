!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var t=n();for(var r in t)("object"==typeof exports?exports:e)[r]=t[r]}}(window,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=3)}([function(e,n,t){"use strict";e.exports=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;return function(){var r=(new Date).getTime();if(r-t>=n)return t=r,e.apply(void 0,arguments)}}},function(e,n,t){},,function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r);function c(e){return new Promise(function(n){var t=setInterval(function(){return function(e){return e&&n(e)&&clearInterval(t)}(document.querySelector(e))},100)})}function i(e){return new Promise(function(n){var t=setInterval(function(){return function(e){return e.length>0&&n([].slice.call(e))&&clearInterval(t)}(document.querySelectorAll(e))},100)})}function a(e,n){return function(t){var r=t.indexOf("#"),o=-1===r?"":t.substr(r);t=-1===r?t:t.substr(0,r);var c=new RegExp("([?&])"+e+"=.*?(&|$)","i"),i=-1!==t.indexOf("?")?"&":"?";return(t=t.match(c)?t.replace(c,"$1"+e+"="+n+"$2"):t+i+e+"="+n)+o}(window.location.href)}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(e){var n,t=e.type,r=void 0===t?"div":t,o=e.id,c=void 0===o?"":o,i=e.classes,a=void 0===i?[]:i,l=e.contents,f=void 0===l?"":l,d=document.createElement(r);return d.id=c,(n=d.classList).add.apply(n,s(a)),d.innerHTML=f,d.detach=function(e){e.parentNode&&e.parentNode.removeChild(e)}.bind(null,d),d.pickStylesFrom=function(e,n){return Object.assign(d.style,function(e){return n.reduce(function(n,t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){u(e,n,t[n])})}return e}({},n,u({},t,e[t]))},{})}(window.getComputedStyle(e)))},d}var f=l({id:"ccjmne-snh-tooltip"});Object.assign(f,{concealTimer:null,reveal:function(e){f.parentNode!==e.target&&(clearTimeout(f.concealTimer),e.target.appendChild(f),f.concealTimer=setTimeout(f.conceal,3e3),f.animate({transform:["translate(-50%, 0) scale(0)","translate(-100%, 1em) scale(1.1)","translate(-100%, 1em) scale(1)"],offset:[0,.8]},{duration:200,easing:"ease-out",fill:"both"}))},conceal:function(){return(f.animate({transform:["translate(-100%, 1em) scale(1)","translate(-100%, 1em) scale(1.1)","translate(-100%, 1em) scale(.5)"],opacity:[1,1,0],offset:[0,.3]},{duration:200,easing:"ease-in",fill:"backwards"}).onfinish=function(){return f.parentNode&&f.parentNode.removeChild(f)})&&clearTimeout(f.concealTimer)}}),f.addEventListener("click",f.conceal);var d=l({type:"span",id:"ccjmne-snh-indicator"}),p=l({id:"ccjmne-snh-help-card",contents:'\n    <div id="ccjmne-snh-help-card-title">\n        <span>Navigation Hotkeys for Google™ Search</span>\n        <small>by&nbsp;<a href="https://github.com/ccjmne">ccjmne</a></small>\n    </div>\n    <table></table>'}),h={"..":" to ","-":"+","|":" or ","[":" [","]":"] ","w/":"add "},m={Up:"↑",Down:"↓",Left:"←",Right:"→",Ctrl:"⌃",Shift:"⇧",Space:"⎵",Enter:"↲",Escape:"␛"},y=p.querySelector("table");function v(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}[[{desc:"Focus [previous] result",hotkey:"Up|k"},{desc:"Focus [next] result",hotkey:"Down|j"},{desc:"Navigate to [previous] page",hotkey:"Left|h"},{desc:"Navigate to [next] page",hotkey:"Right|l"}],[{desc:"Open [focused] result",hotkey:"Space|Enter"},{desc:"in [new tab]",hotkey:"w/Ctrl",indent:1},{desc:"and [follow]",hotkey:"w/Ctrl-Shift",indent:2},{desc:"Open result #[1] to #[9]",hotkey:"1..9"}],[{desc:"Focus [search] field",hotkey:"/"},{desc:"Enter [filter & sort] mode",hotkey:"Ctrl-/"}],[{desc:"Search [all]",hotkey:"a"},{desc:"Search [videos]",hotkey:"v"},{desc:"Search [images]",hotkey:"i"},{desc:"Search [news]",hotkey:"n"}],[{desc:"[Show] help",hotkey:"?"},{desc:"[Close] help",hotkey:"Escape"}]].forEach(function(e){return e.forEach(function(e,n){return y.appendChild(l({type:"tr",classes:0===n?["ccjmne-snh-new-section"]:[],contents:"\n    <td>".concat(e.indent?'<div class="ccjmne-snh-indent ccjmne-snh-indent-'.concat(e.indent,'"></div>'):"").concat(e.desc.replace(/\[([^\]]+)\]/g,function(e,n){return"<em>".concat(n,"</em>")}),"</td>\n    <td>").concat(e.hotkey.split(new RegExp(function(e){return"(?=".concat(e,")|(?<=").concat(e,")")}(Object.keys(h).map(function(e){return e.replace(/./g,function(e){return"\\"+e})}).join("|")))).map(function(e){return h[e]||"<kbd>".concat(e).concat(m[e]?'<span class="kbd-addon">'.concat(m[e],"</span>"):"","</kbd>")}).join(""),"</td>")}))})}),p.addEventListener("click",function(e){return e.stopPropagation()});var w=l({id:"ccjmne-snh-backdrop",contents:'\n    <div id="ccjmne-snh-tilt-origin">\n        <div id="ccjmne-snh-help-shadow"></div>\n        <div id="ccjmne-snh-help-card-container"></div>\n    </div>'}),b=w.querySelector("#ccjmne-snh-tilt-origin");function g(e){e&&!w.parentNode?(document.body.prepend(w),w.animate({opacity:[0,1]},{duration:200,easing:"ease-out"}),p.animate({transform:["translateY(-50%) rotateX(80deg)","translateY(2%) rotateX(0)","translateY(0)"],opacity:[0,1,1],offset:[0,.8]},{duration:300,delay:100,easing:"ease-out",fill:"backwards"})):!e&&w.parentNode&&(b.style.transform="",w.animate({opacity:[1,0]},{duration:200,easing:"ease-out"}).onfinish=w.detach,p.animate({transform:["scale(1)","scale(1.1)","scale(.5)"]},{duration:200,easing:"ease-out"}))}function k(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(r=(i=a.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,c=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw c}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}w.querySelector("#ccjmne-snh-help-card-container").appendChild(p),w.addEventListener("click",function(){return g(!1)}),b.addEventListener("mouseleave",function(){return b.style.transform=""}),b.addEventListener("mousemove",o()(function(e){var n=b.getBoundingClientRect(),t=n.left,r=n.top,o=n.right,c=n.bottom,i=e.clientX-(t+o)/2,a=e.clientY-(r+c)/2,u=Math.sqrt(Math.pow(i,2)+Math.pow(a,2))/Math.max(p.clientWidth,p.clientHeight);b.style.transform="rotate3d(".concat(Math.round(a),", ").concat(-Math.round(i),", 0, ").concat(10*u,"deg)")},100)),function(e){p.addEventListener("mousedown",function(){return e.down()}),p.addEventListener("mouseup",function(){return e.up()}),p.addEventListener("mouseleave",function(){return e.up()})}({isDown:!1,transform:["scale(1)","scale(.95)"],down:function(){this.isDown=this.isDown||p.animate({transform:this.transform},{duration:100,fill:"forwards",easing:"ease-out"})},up:function(){this.isDown=this.isDown&&(p.animate({transform:v(this.transform).reverse()},{duration:300,fill:"forwards",easing:"cubic-bezier(.25, 2.5, .25, .5)"}),!1)}}),d.addEventListener("mouseenter",f.reveal),f.addEventListener("click",function(){return g(!0)});var j={root:"#hdtbMenus",menus:".hdtb-mn-hd[role=button][aria-haspopup=true]",options:[".hdtb-mn-o .hdtbItm > a",".hdtb-mn-o :not(input)[tabindex]"]};function A(e){var n=document.querySelector("#hdtb-tls.hdtb-tl"),t=document.querySelector("".concat(j.root," ").concat(j.menus,".hdtb-tsel")),r=document.querySelector("".concat(j.root," .hdtb-mn-o"));n.matches(".hdtb-tl-sel")||n.click(),e&&!r?(t||document.querySelector("".concat(j.root," ").concat(j.menus))).click():!e&&r&&r.previousElementSibling.click()}function S(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Promise.all([c(j.root),i("".concat(j.root," ").concat(j.menus))]).then(function(e){var n=k(e,2),t=n[0],r=n[1];t.addEventListener("keydown",function(e){if(~["?","/","Escape"].indexOf(e.key))return A(!1);if(~["Enter","Escape"," ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","h","j","k","l"].indexOf(e.key)){var n=t.querySelector(j.options.map(function(e){return"".concat(e,":focus")})),o=[].slice.apply(t.querySelectorAll(j.options)),c=function(e){return e?r.indexOf(e.previousElementSibling):0}(t.querySelector(".hdtb-mn-o")),i=o.indexOf(n),a={Enter:function(){return n.click()}," ":function(){return n.click()},ArrowLeft:function(){return r[c>0?c-1:r.length-1].click()},ArrowUp:function(){return o[i>0?i-1:o.length-1].focus()},ArrowRight:function(){return r[(c+1)%r.length].click()},ArrowDown:function(){return o[(i+1)%o.length].focus()},h:function(){return a.ArrowLeft()},j:function(){return a.ArrowDown()},k:function(){return a.ArrowUp()},l:function(){return a.ArrowRight()}};a[e.key](),e.stopPropagation(),e.preventDefault()}})}),t(1),c("input.gsfi").then(function(e){var n=function(){return Promise.resolve().then(function(){e.focus(),e.setSelectionRange(e.value.length,e.value.length)})},t={restoreFocus:function(){return"noop"},Escape:function(){return g(!1),t.restoreFocus()},"?":function(){return g(!0)},a:function(){return window.location.href=a("tbm","")},i:function(){return window.location.href=a("tbm","isch")},m:function(){return null},n:function(){return window.location.href=a("tbm","nws")},v:function(){return window.location.href=a("tbm","vid")},"/":function(e){return e.ctrlKey?A(!0):n()}};e.addEventListener("blur",function(){return t.restoreFocus()}),document.body.onkeydown=function(e){e.srcElement.matches(["input","select","textarea"])||e.altKey||e.ctrlKey&&!~["/"," ","ArrowUp","ArrowDown","j","k"].indexOf(e.key)||~["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","h","j","k","l"].indexOf(e.key)&&!~[void 0,null,"","nws","vid"].indexOf(function(e){return(window.location.search.match(new RegExp("(?<=[&?]".concat(e,"=)[^&]*")))||[])[0]}("tbm"))||function(n){"function"==typeof n&&Promise.resolve(n(e)).then(function(){return e.preventDefault(),e.stopPropagation()})}(t[e.key])},i(["#search .r > a:first-of-type","#search .r g-link:first-of-type > a",".ads-ad h3 > a:not(:empty)",".ads-ad a > h3"]).then(function(e){return e.filter(function(e){return!e.closest(["g-scrolling-carousel","g-accordion-expander"])})}).then(function(e){return e.filter(function(e){return null!==e.offsetParent})}).then(function(e){var r=this;Object.assign(this,{prev:document.querySelector("a.pn#pnprev"),next:document.querySelector("a.pn#pnnext"),cur:e.length>0?0:-1,results:e.map(function(e){return{container:e.closest([".r","li.ads-ad",".ads-ad li"]),palette:e.querySelector("h3")||e.closest("h3"),link:e.closest("a")}}),go:function(e){return r.results[r.cur]&&r.results[r.cur].link.dispatchEvent(new MouseEvent("click",e))},focus:function(e){return-1===(r.cur=e)?n().then(d.detach):function(e){e.link.focus(),e.container.prepend(d),e.container.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),d.animate([{transform:"translateX(-50px)"},{transform:"translateX(0)"}],{duration:100,easing:"ease-out"})}(r.results[e])}}),this.results.forEach(function(e,n){var t=l({classes:["ccjmne-snh-number-indicator"],contents:n+1});t.pickStylesFrom(e.palette,["height","line-height"]),t.addEventListener("mouseenter",f.reveal),e.container.prepend(t)}),this.focus(this.cur),Object.assign.apply(Object,[t].concat(S(S(Array(9).keys()).map(function(e){return function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}({},e+1,function(n){return r.focus(e),r.go(n)})})))),Object.assign(t,{restoreFocus:function(){return r.focus(r.cur>0?r.cur:0)}," ":function(e){return r.go({ctrlKey:e.ctrlKey,shiftKey:e.shiftKey})},ArrowLeft:function(){return r.prev&&r.prev.dispatchEvent(new MouseEvent("click"))},ArrowUp:function(){return r.focus(r.cur>0?r.cur-1:r.results.length-1)},ArrowRight:function(){return r.next&&r.next.dispatchEvent(new MouseEvent("click"))},ArrowDown:function(){return r.focus(++r.cur%r.results.length)},h:function(){return t.ArrowLeft()},j:function(){return t.ArrowDown()},k:function(){return t.ArrowUp()},l:function(){return t.ArrowRight()}})}.bind({}))})}])});